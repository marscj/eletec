(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2563a916"],{"62b8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-view",{staticClass:"bg-white"},[a("div",{staticClass:"table-operator",attrs:{align:"right"}},[a("a-button",{attrs:{type:"primary",icon:"upload"},on:{click:function(e){return t.openModal()}}},[t._v(" New ")])],1),a("a-list",{ref:"list",attrs:{size:"default",rowKey:"id",grid:{gutter:24,lg:1,md:1,sm:1,xs:1},dataSource:t.listData,loading:t.loading},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[[a("a-card",{attrs:{hoverable:!0}},[a("img",{attrs:{slot:"cover",src:0==e.tag?e.image.advertising:e.image.banner,alt:"images"},slot:"cover"}),a("a-card-meta",{attrs:{title:0==e.tag?"Advertising":"Banner "+e.sorter}}),a("template",{staticClass:"ant-card-actions",slot:"actions"},[a("a-popconfirm",{attrs:{title:"Are you sure delete this data?",okText:"Yes",cancelText:"No"},on:{confirm:function(a){return t.deleteData(e)}}},[a("a",{attrs:{href:"#"}},[t._v("Delete")])])],1)],2)]],2)}}])}),a("a-modal",{attrs:{title:void 0===this.form.id?"Create":"Edit"},on:{ok:t.upload},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("validation-observer",{ref:"observer"},[a("validation-provider",{attrs:{name:"non_field_errors"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[a("span",{staticClass:"errorText"},[t._v(t._s(r[0]))])]}}])}),a("a-form",{attrs:{form:t.form,submit:t.upload,"label-col":{span:4},"wrapper-col":{span:16}}},[a("a-form-item",{attrs:{label:"Image",help:0==t.form.tag?"picture size is better 1280x720":"picture size is better  854x480"}},[a("validation-provider",{attrs:{vid:"image"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[a("a-upload",{attrs:{multiple:!1,fileList:t.fileList,beforeUpload:t.beforeUpload,disabled:t.fileList.length>0,remove:t.handleRemove}},[0==t.fileList.length?a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" Select File ")],1):t._e()],1),a("span",{staticClass:"errorText"},[t._v(t._s(r[0]))])]}}])})],1),a("a-form-item",{attrs:{label:"Tag"}},[a("validation-provider",{attrs:{vid:"tag"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[a("a-select",{on:{change:t.onChange},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag",e)},expression:"form.tag"}},t._l(t.options,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("span",{staticClass:"errorText"},[t._v(t._s(r[0]))])]}}])})],1),a("a-form-item",{attrs:{label:"Sorter",help:"for picture sorting"}},[a("validation-provider",{attrs:{vid:"sorter"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[a("a-input-number",{attrs:{disabled:0==t.form.tag},model:{value:t.form.sorter,callback:function(e){t.$set(t.form,"sorter",e)},expression:"form.sorter"}}),a("span",{staticClass:"errorText"},[t._v(t._s(r[0]))])]}}])})],1)],1)],1)],1)],1)},o=[],i=(a("99af"),a("c975"),a("fb6a"),a("a434"),a("d3b7"),a("2909")),n=a("680a"),s=a("365c"),l=a("b775");function c(t){return Object(l["b"])({url:s["a"].Apps,method:"get",params:t})}function d(t){return Object(l["b"])({url:s["a"].Apps,method:"post",data:t}).then(s["c"]).catch(s["b"])}function f(t){return Object(l["b"])({url:s["a"].Apps+"".concat(t,"/"),method:"delete"}).then(s["e"]).catch(s["d"])}var u={components:{PageView:n["b"]},data:function(){return{loading:!1,uploading:!1,listData:void 0,modal:!1,form:{},fileList:[],options:[{value:0,label:"Advertising"},{value:1,label:"Banner"}]}},mounted:function(){this.getListData()},methods:{getListData:function(){var t=this;this.loading=!0,c().then((function(e){t.listData=e.result})).finally((function(){t.loading=!1}))},deleteData:function(t){var e=this;this.loading=!0,f(t.id).then((function(t){e.getListData()})).finally((function(){e.loading=!1}))},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;e||this.$message.error("You can only upload JPG or PNG file!");var a=t.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),e&&a&&(this.fileList=[].concat(Object(i["a"])(this.fileList),[t])),!1},handleRemove:function(t){var e=this.fileList.indexOf(t),a=this.fileList.slice();a.splice(e,1),this.fileList=a},upload:function(){var t=this,e=new FormData;e.append("image",this.fileList[0]),e.append("tag",this.form.tag),e.append("sorter",this.form.sorter),this.uploading=!0,d(e).then((function(e){t.getListData(),t.modal=!1})).finally((function(){t.uploading=!1})).catch((function(e){e.response&&t.$refs.observer.setErrors(e.response.data.result)}))},onChange:function(t){0==t&&(this.form.sorter=0)},openModal:function(t){this.modal=!0,this.fileList=[],this.form={tag:0,sorter:0}}}},p=u,m=a("2877"),g=Object(m["a"])(p,r,o,!1,null,null,null);e["default"]=g.exports},a434:function(t,e,a){"use strict";var r=a("23e7"),o=a("23cb"),i=a("a691"),n=a("50c4"),s=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),f=a("ae40"),u=d("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min,v=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u||!p},{splice:function(t,e){var a,r,d,f,u,p,b=s(this),y=n(b.length),_=o(t,y),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=y-_):(a=x-2,r=g(m(i(e),0),y-_)),y+a-r>v)throw TypeError(h);for(d=l(b,r),f=0;f<r;f++)u=_+f,u in b&&c(d,f,b[u]);if(d.length=r,a<r){for(f=_;f<y-r;f++)u=f+r,p=f+a,u in b?b[p]=b[u]:delete b[p];for(f=y;f>y-r+a;f--)delete b[f-1]}else if(a>r)for(f=y-r;f>_;f--)u=f+r-1,p=f+a-1,u in b?b[p]=b[u]:delete b[p];for(f=0;f<a;f++)b[f+_]=arguments[f+2];return b.length=y-r+a,d}})},fb6a:function(t,e,a){"use strict";var r=a("23e7"),o=a("861d"),i=a("e8b5"),n=a("23cb"),s=a("50c4"),l=a("fc6a"),c=a("8418"),d=a("b622"),f=a("1dde"),u=a("ae40"),p=f("slice"),m=u("slice",{ACCESSORS:!0,0:0,1:2}),g=d("species"),v=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!p||!m},{slice:function(t,e){var a,r,d,f=l(this),u=s(f.length),p=n(t,u),m=n(void 0===e?u:e,u);if(i(f)&&(a=f.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?o(a)&&(a=a[g],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(f,p,m);for(r=new(void 0===a?Array:a)(h(m-p,0)),d=0;p<m;p++,d++)p in f&&c(r,d,f[p]);return r.length=d,r}})}}]);